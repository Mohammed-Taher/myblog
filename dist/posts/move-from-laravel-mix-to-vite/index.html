<!DOCTYPE html>
<html lang="ar" dir="rtl">

  <head>
    <meta property="og:site_name" content="" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="" />

     

    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="alternate" type="application/rss+xml" href="http://localhost:8080/feed.xml" />

    <title>محمد طاهر</title>
    <link href="https://unpkg.com/prismjs@1.20.0/themes/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="/assets/app.css" />
  </head>

  <body class="dark:bg-slate-800 dark:text-white">

    <div class="min-h-screen flex flex-col mx-auto">
      <header class="w-10/12 md:w-8/12 py-7 mx-auto">
        <nav class="flex flex-row items-center nav box-hidden md:mx-auto">
          <h1 class="flex-1 text-bold">
            <a href="/" class="text-xl font-bold text-black hover:text-black md:text-3xl">محمد طاهر</a>
          </h1>
          <a href="/blog" class="text-lg font-bold hover:text-emerald-600">المدونة</a>
        </nav>
      </header>

      <main class="w-10/12 md:w-8/12 content mx-auto my-20 text-md grow">
        
<article class="text-xl leading-relaxed">
	<div class="mb-8">
		<div class="mb-5">
		
			<a class="tag" href="/tags/Laravel">Laravel</a>
		
		</div>
		<h1 class="title">نقل مشروع Laravel من Laravel Mix إلى Vite</h1>
		<div class="flex flex-row items-center mb-10">
			<svg class="mb-1 ml-2 stroke-gray-600 feather feather-calendar" xmlns="http://www.w3.org/2000/svg"
				width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
				stroke-linecap="round" stroke-linejoin="round">
				<rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
				<line x1="16" y1="2" x2="16" y2="6"></line>
				<line x1="8" y1="2" x2="8" y2="6"></line>
				<line x1="3" y1="10" x2="21" y2="10"></line>
			</svg>
			<time class="text-sm leading-none text-gray-600 md:text-lg" datetime="2023-03-11T06:41:52.594Z">March 11, 2023</time>
		</div>
		<hr />
		<div class="content">
			<p>أعلن فريق تطوير إطار العمل Laravel في الإصدار <code>9.19</code> أن إطار العمل سينتقل إلى استخدام <a href="http://vitejs.dev">Vite</a> بدلًا عن <a href="https://laravel-mix.com/">Laravel Mix</a> لتحزيم الأصول وتصريفها في مشاريع Laravel.</p>
<p>عملية تحزيم الأصول وتصريفها من العمليات الشائعة في مجال تطوير الواجهات الأمامية، والأصول هي ملفات CSS و Javascript وغيرها التي تستخدم في بناء الواجهة الأمامية. وعادة ما تكتب هذه الملفات باستخدام لغات وتقنيات لا تتعرف عليها المتصفحات، فعلى سبيل المثال يستخدم مطورو الواجهات الأمامية لغة Sass في كتابة ملفات CSS، إذ تضفي هذه اللغة -أي Sass- مزيدًا من القوة والمرونة إلى ملفات CSS، ولكن المشكلة أن المتصفحات لا تستطيع التعرف على هذه الملفات؛ لذا تستخدم برمجيات خاصة تدعى بالمصرفات تحوّل الشيفرة المكتوبة بلغة Sass إلى لغة CSS المعروفة من قبل المتصفح.</p>
<p>كذلك الأمر بالنسبة للغة Javascript؛ إذ يستخدم الكثير من المطورين لغة <a href="https://www.typescriptlang.org/">Typescript</a> والتي لا يستطيع المتصفح أن يتعامل معها؛ ولكن باستخدام المصرفات يمكن تحويل الشيفرة إلى لغة Javascript.</p>
<p>تستخدم المصرّفات كذلك في تنفيذ عمليات أخرى مثل تحزيم الصور وتصغير الشيفرة وضغطها والكثير من العمليات المفيدة والتي تسهل عمل المبرمج وتوفّر عليه الوقت والجهد.</p>
<p>في الإصدارات السابقة من Laravel كان إطار العمل يستخدم مكتبة <a href="https://webpack.js.org/">Webpack</a> لتحزيم الملفات، ويتيح التعامل مع هذه المكتبة باستخدام الحزمة Laravel Mix التي تقدّم عددًا من الدوال البسيطة والتي تساعد المبرمج على تنفيذ عمليات التصريف ونقل الملفات وتصغير الشيفرة وضغطها دون الحاجة إلى الدخول في تفاصيل هذه العمليات باستخدام Webpack.</p>
<p>أما الآن فقد انتقل إطار العمل Laravel في الإصدار 9.19 إلى استخدام Vite كبديل لحزمة Laravel Mix. طُوِّر Vite على يد <a href="https://twitter.com/youyuxi">Evan You</a> وهو مطوّر إطار العمل Vue الشهير والغني عن التعريف. يمتاز Vite كما يدل الاسم (Vite يعني سريع باللغة الفرنسية) بسرعته الكبيرة في تحزيم الملفات، ويدعم Vite كذلك ميزة Hot Module Replacement وتعرف اختصارًا (HMR). والتي تتيح تحديث مكون معين في صفحة الويب بسرعة فائقة وبدقة عالية دون الحاجة إلى إعادة تحميل الصفحة أو تغيير حالة التطبيق.</p>
<h2>الانتقال إلى Vite</h2>
<p>الخطوة الأولى في عملية الانتقال إلى Vite هي التأكد من تحديث إطار العمل Laravel إلى الإصدار <code>9.19.0</code>؛ لذا سننفذ الأمر التالي في المجلد الرئيسي للمشروع:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">composer</span> require laravel/framework:^9.19.0</code></pre>
<p>بعد اكتمال هذه العملية، سنبدأ بتثبيت Vite و Laravel Vite Plugin باستخدام مدير الحزم <code>npm</code>:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> <span class="token function">install</span> --save-dev vite laravel-vite-plugin</code></pre>
<p>كذلك سنلغي تثبيت Laravel Mix و Webpack باستخدام الأمر التالي:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> remove laravel-mix <span class="token operator">&amp;&amp;</span> <span class="token function">rm</span> webpack.mix.js</code></pre>
<p>بعد اكتمال عملية إلغاء التثبيت، سننتقل إلى الملف <code>package.json</code> لتعديل القسم <code>scripts</code>. احذف كل شيء ضمن هذا القسم فقط، وأضف السطرين التاليين إليه:</p>
<pre class="language-json"><code class="language-json"> <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"dev"</span><span class="token operator">:</span> <span class="token string">"vite"</span><span class="token punctuation">,</span><br>        <span class="token property">"build"</span><span class="token operator">:</span> <span class="token string">"vite build"</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre>
<p>الآن سنحتاج إلى تهيئة Vite للعمل؛ ولهذا سننشئ الملف <code>vite.config.js</code> في المجلد الرئيسي للمشروع. أضف الشيفرة التالية إلى هذا الملف:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> laravel <span class="token keyword">from</span> <span class="token string">"laravel-vite-plugin"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">laravel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"resources/css/app.css"</span><span class="token punctuation">,</span> <span class="token string">"resources/js/app.js"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>في البداية سنستورد الدالة <code>laravel</code> من الإضافة <code>laravel-vite-plugin</code>، وسنستورد كذلك الكائن <code>defineConfig</code> من المكتبة <code>vite</code>.</p>
<p>وفي الخاصية plugins سنستدعي الدالة <code>laravel</code> ونمرر إليها مصفوفة تتضمن الملفات التي نرغب في تصريفها باستخدام Vite. أضفنا هنا الملفين <code>app.css</code> و <code>app.js</code> ويمكنك بكل تأكيد إضافة المزيد من الملفات وفق الحاجة.</p>
<p>والآن لاستخدام الملفات التي سينتجها Vite بعد تنفيذ عملية التصريف سنستعين بالموجّه الجديد ‎<code>@vite</code> عوضًا عن الدالة <code>mix()</code>.</p>
<pre class="language-php"><code class="language-php">@<span class="token function">vite</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'resources/css/app.css'</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'resources/js/app.js'</span><span class="token punctuation">]</span><span class="token punctuation">)</span></code></pre>
<p>لاحظ أننا نمرر إلى الموجّه ‎<code>@vite</code> أسماء الملفات الأصلية غير المصرفة لا أسماء الملفات الناتجة عن عملية التصريف. ويمكنك هنا تمرير مصفوفة بأسماء الملفات وبهذا ستستخدم الموجه ‎<code>@vite</code> مرة واحدة، أو تمرير كل ملف على حدة واستخدام موجّه ‎<code>@vite</code> أكثر من مرة.</p>
<p>الخطوة الأخيرة هي تشغيل Vite:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> run dev</code></pre>
<p>ويمكنك تصريف الأصول في التطبيق لتكون جاهزة للنشر باستخدام الأمر:</p>
<pre class="language-shell"><code class="language-shell"><span class="token function">npm</span> run build</code></pre>
<p>سيصرّف vite الأصول في المجلد <code>build</code> ضمن المجلد <code>public</code>؛ لذا يمكننا حذف المجلدين <code>js</code> و <code>css</code> من المجلد <code>public</code>.</p>
<p>يجدر التنبيه هنا إلى أن Vite يدعم وحدات ES فقط، وهذا يعني أنّك لا تستطيع استخدام <code>require</code> لاستيراد الملفات، بل يجب استخدام عبارة <code>import</code> لتنفيذ ذلك:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> myPackage <span class="token keyword">from</span> <span class="token string">"my-package"</span><span class="token punctuation">;</span></code></pre>
<h2>التعامل مع ملفات CSS</h2>
<p>ينصح الدليل الرسمي للتحويل من Laravel Mix إلى Vite باستيراد ملفات CSS باستخدام ملفات Javscript للحصول على تجربة أفضل خصوصًا عند العمل على تطبيقات الصفحة الوحدة Single Page Applications:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token string">"../css/app.css"</span><span class="token punctuation">;</span></code></pre>
<h2>ملاحظات بخصوص React و Vue</h2>
<p>إن كنت تستخدم مكتبة React في بناء الواجهة الأمامية لتطبيقك، فيجب عليك أن تتأكد من أن جميع الملفات التي تحتوي على شيفرات JSX تنتهي باللاحقة ‎<code>.jsx</code> وليس ‎<code>.js</code>.</p>
<p>كذلك الأمر بالنسبة لإطار العمل Vue، إذ يجب إضافة اللاحقة ‎<code>.vue</code> إلى اسم الملف عند استيراد المكونات:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Button <span class="token keyword">from</span> <span class="token string">"./Button.vue"</span><span class="token punctuation">;</span></code></pre>
<h2>إعادة تحميل الصفحات تلقائيًا</h2>
<p>يقدّم Vite ميزة جميلة وهي إعادة تحميل الصفحة في المتفصح تلقائيًا Hot Reloading مع كل عملية تصريف للأصول، أي عند تنفيذ الأمر <code>npm run dev</code>.</p>
<p>هذه الميزة مقتصرة على ملفات الأصول فقط، بمعنى أنّ إجراء التعديلات على ملفات blade لن يؤدي إلى إعادة تحميل الصفحة تلقائيًا، ولكن تمكن المطوّر <a href="https://twitter.com/freekmurze">Freek Van der Herten</a> من إيجاد حل لهذه المشكلة.</p>
<p>عدّل الملف <code>vite.config.js</code> ليصبح بالشكل التالي:</p>
<pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> laravel <span class="token keyword">from</span> <span class="token string">"laravel-vite-plugin"</span><span class="token punctuation">;</span><br><span class="token keyword">import</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"vite"</span><span class="token punctuation">;</span><br><br><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>    <span class="token function">laravel</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"resources/js/app.js"</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token punctuation">{</span><br>      <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"blade"</span><span class="token punctuation">,</span><br>      <span class="token function">handleHotUpdate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> file<span class="token punctuation">,</span> server <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">endsWith</span><span class="token punctuation">(</span><span class="token string">".blade.php"</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>          server<span class="token punctuation">.</span>ws<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">{</span><br>            <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">"full-reload"</span><span class="token punctuation">,</span><br>            <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">"*"</span><span class="token punctuation">,</span><br>          <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token punctuation">]</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
<p>والآن نفّذ الأمر <code>npm run dev</code>، وستلاحظ أن إجراء التعديلات على ملفات blade سيؤدي إلى إعادة تحميل الصفحة في المتصفح.</p>
<h2>المصادر</h2>
<ul>
<li><a href="https://github.com/laravel/vite-plugin/blob/main/UPGRADE.md">Upgrade Guide </a></li>
<li><a href="https://christoph-rumpel.com/2022/6/moving-a-laravel-webpack-project-to-vite">Moving A Laravel Webpack Project To Vite</a></li>
<li><a href="https://freek.dev/2277-using-laravel-vite-to-automatically-refresh-your-browser-when-changing-a-blade-file">Using Laravel Vite to automatically refresh your browser when changing a Blade file </a></li>
</ul>

		</div>
</article>
<div class="mb-8">
	<h2 class="title">التعليقات</h2>
	<div id="disqus_thread"></div>
	<script>
		/**
	*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
	*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */

		// var disqus_config = function () {
		// this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
		// this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
		// };

		(function () { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');
			s.src = 'https://mohtaher-com.disqus.com/embed.js';
			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
		})();
	</script>
	<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by
			Disqus.</a></noscript>
</div>

      </main>


      <footer class="w-full mx-auto bg-gray-200 py-10 mt-10">
        <div class="container mx-auto w-10/12 md:w-8/12">
          <div>
            <h1 class="text-gray-800 text-4xl font-bold mb-5">محمد طاهر</h1>
          </div>
          <div class="text-gray-800 md:flex md:flex-row ">
            <div>
              <p class="text-gray-800 mb-5">
                موقعي الشخصي الذي أوثّق فيه ما أتعلمه في البرمجة عمومًا وفي مجال تطوير تطبيقات الويب خصوصًا.
              </p>
              <p class="text-gray-800 mb-5">
                بني هذا الموقع باستخدام <a href="https://www.11ty.dev">Eleventy</a>.

              </p>
              <p class="text-gray-800 mb-5">
                محتوى هذا الموقع مرخص بموجب <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.ar" class="hover:text-black-300">رخصة المشاع الإبداعي نَسب المُصنَّف - الترخيص بالمثل 4.0 دولي. </a>
              </p>
            </div>

            <div class="mt-10 md:mt-0 flex flex-row justify-center mr-auto">
              <a href="/feed.xml">
                <svg alt="خلاصة RSS" class="stroke-gray-800 stroke-1 hover:stroke-2 mx-4  hover:stroke-black-300" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-rss">
                  <path d="M4 11a9 9 0 0 1 9 9"></path>
                  <path d="M4 4a16 16 0 0 1 16 16"></path>
                  <circle cx="5" cy="19" r="1"></circle>
                </svg>
              </a>
              <a href="https://twitter.com/MohTaher">
                <svg class="stroke-gray-800 stroke-1 hover:stroke-2 mx-4  hover:stroke-black-300" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-twitter">
                  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
                </svg>
              </a>
              <a href="https://github.com/Mohammed-Taher">
                <svg class="stroke-gray-800 stroke-1 hover:stroke-2 mx-4  hover:stroke-black-300" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-github">
                  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
                </svg>
              </a>

              <a href="mail:mohammed.taher2007@gmail.com">
                <svg class="stroke-gray-800 stroke-1 hover:stroke-2 mx-4  hover:stroke-black-300" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-mail">
                  <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                  <polyline points="22,6 12,13 2,6"></polyline>
                </svg>
              </a>
            </div>
          </div>
        </div>
      </footer>
    </div>


    <script id="dsq-count-scr" src="//mohtaher-com.disqus.com/count.js" async></script>
  </body>

</html>
